var Te=Object.defineProperty;var ze=(t,e,r)=>e in t?Te(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var I=(t,e,r)=>(ze(t,typeof e!="symbol"?e+"":e,r),r);import"./modulepreload-polyfill.c7c6310f.js";import{G as Ce,B as We,ak as He,as as Oe,al as Ue,at as Ve,aq as Fe,au as Y,M as D,ac as je,u as ae,O as G,ar as b,av as q,a as Xe,P as Ye,W as De,aw as qe,b as ne,m as Ze,Z as Je,ao as ie,ax as Ke,an as Ne}from"./three.module.975d644b.js";import{O as Qe}from"./OrbitControls.7a7c2cc8.js";function O(t,e=!1){const r=t[0].index!==null,a=new Set(Object.keys(t[0].attributes)),i=new Set(Object.keys(t[0].morphAttributes)),d={},u={},p=t[0].morphTargetsRelative,f=new Ce;let M=0;for(let l=0;l<t.length;++l){const o=t[l];let h=0;if(r!==(o.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+l+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(const s in o.attributes){if(!a.has(s))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+l+'. All geometries must have compatible attributes; make sure "'+s+'" attribute exists among all geometries, or in none of them.'),null;d[s]===void 0&&(d[s]=[]),d[s].push(o.attributes[s]),h++}if(h!==a.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+l+". Make sure all geometries have the same number of attributes."),null;if(p!==o.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+l+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(const s in o.morphAttributes){if(!i.has(s))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+l+".  .morphAttributes must be consistent throughout all geometries."),null;u[s]===void 0&&(u[s]=[]),u[s].push(o.morphAttributes[s])}if(e){let s;if(r)s=o.index.count;else if(o.attributes.position!==void 0)s=o.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+l+". The geometry must have either an index or a position attribute"),null;f.addGroup(M,s,l),M+=s}}if(r){let l=0;const o=[];for(let h=0;h<t.length;++h){const s=t[h].index;for(let m=0;m<s.count;++m)o.push(s.getX(m)+l);l+=t[h].attributes.position.count}f.setIndex(o)}for(const l in d){const o=se(d[l]);if(!o)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+l+" attribute."),null;f.setAttribute(l,o)}for(const l in u){const o=u[l][0].length;if(o===0)break;f.morphAttributes=f.morphAttributes||{},f.morphAttributes[l]=[];for(let h=0;h<o;++h){const s=[];for(let c=0;c<u[l].length;++c)s.push(u[l][c][h]);const m=se(s);if(!m)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+l+" morphAttribute."),null;f.morphAttributes[l].push(m)}}return f}function se(t){let e,r,a,i=0;for(let p=0;p<t.length;++p){const f=t[p];if(f.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(e===void 0&&(e=f.array.constructor),e!==f.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(r===void 0&&(r=f.itemSize),r!==f.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(a===void 0&&(a=f.normalized),a!==f.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;i+=f.array.length}const d=new e(i);let u=0;for(let p=0;p<t.length;++p)d.set(t[p].array,u),u+=t[p].array.length;return new We(d,r,a)}let n={makeShape:function(){let t;if(arguments.length){let e=arguments[0];t=new He,t.moveTo(e[0][0],e[0][1]);for(let r=1;r<e.length;r++)t.lineTo(e[r][0],e[r][1]);if(arguments.length>1)for(let r=1;r<arguments.length;r++){let a=arguments[r],i=new Oe;i.moveTo(a[0][0],a[0][1]);for(let d=1;d<a.length;d++)i.lineTo(a[d][0],a[d][1]);t.holes.push(i)}return t}else console.error("Something wrong!")},makeExtrudeGeometry:function(t,e){let r={steps:1,depth:e,bevelEnabled:!1},a=new Ue(t,r);return a.rotateX(-.5*Math.PI),a},makeShapeGeometry:function(t){let e=this.makeShape(t);return new Ve(e)},makeMesh:function(t,e,r){let a,i;return t==="lambert"?a=new Fe({color:r}):t==="phong"?a=new Y({color:r}):console.error("unrecognized type!"),i=new D(e,a),i.castShadow=!0,i.receiveShadow=!0,i}};const le={window:function(){let t=document.createElement("canvas"),e=t.getContext("2d");t.width=32,t.height=32;let r={border:"#3c3443",top:"#9d94a7",bottom:"#796e8c"};e.fillStyle=r.border,e.fillRect(0,0,32,32),e.fillStyle=r.top,e.fillRect(2,2,13,13),e.fillStyle=r.top,e.fillRect(17,2,13,13),e.fillStyle=r.bottom,e.fillRect(2,17,13,13),e.fillStyle=r.bottom,e.fillRect(17,17,13,13);let a=new je(t);return a.wrapS=ae,a.wrapT=ae,a.needsUpdate=!0,a}},de=[2931378,4695808,14024704,556935,3648782,5066061,13532672,14721555,8895710];class he{constructor(e){I(this,"index");I(this,"color");I(this,"mesh");I(this,"wheels");I(this,"startAngle");this.index=Math.floor(Math.random()*de.length),this.color=e||de[this.index],this.mesh=new G,this.wheels=[],this.startAngle=0,this.addBoy(),this.addWindows(),this.addLights(),this.addWheels()}addBoy(){const e=[[-13,2],[13,2],[13,8],[5,8],[3,13],[-8,13],[-10,8],[-13,8],[-13,2]];let r=n.makeShape(e),a=n.makeExtrudeGeometry(r,14);a.translate(0,-7,0),a.rotateX(.5*Math.PI);let i=n.makeMesh("phong",a,this.color);this.mesh.add(i)}addWindows(){let e=new G,r=new G,a=[[-2,8],[4,8],[2.5,12],[-2,12]],i=this.makeWindow(a);r.add(i);let d=[[-9,8],[-3,8],[-3,12],[-7.5,12]],u=this.makeWindow(d);r.add(u),r.position.z=7.1,e.add(r);let p=r.clone();p.position.z=-7.1,e.add(p);let f=new b(.1,5,12);f.rotateZ(.12*Math.PI),f.translate(4.2,10,0);let M=n.makeMesh("phong",f,0);e.add(M);let l=M.clone();l.rotation.z=-.24*Math.PI,l.position.x=-19,l.position.y=6,e.add(l),this.mesh.add(e)}makeWindow(e){let r=0,a=n.makeShape(e),i=n.makeExtrudeGeometry(a,.1);i.rotateX(.5*Math.PI);let d=n.makeMesh("phong",i,r);return d.castShadow=!1,d}addLights(){let e=[],r=new b(2,2,2);[[12.5,7.1,6.1],[12.5,7.1,-6.1],[-14,7.1,6.1],[-14,7.1,-6.1]].forEach(function(f){let M=f[0],l=f[1],o=f[2],h=r.clone();h.translate(M,l,o),e.push(h)});let i=r.clone();i.scale(1,1.3,7.1),i.translate(12.1,3.3,0),e.push(i);let d=i.clone();d.translate(-26,0,0),e.push(d);const u=O(e);let p=n.makeMesh("phong",u,16777215);this.mesh.add(p)}addWheels(){const e=()=>{let u=new G,p=new q(3,3,3,32);p.rotateX(.5*Math.PI);let f=n.makeMesh("lambert",p,0);u.add(f);let M=n.makeMesh("lambert",p,14540253);M.castShadow=!1,M.scale.set(.8,.8,1.1),u.add(M);let l=new q(1,1,3.6,4);l.rotateX(.5*Math.PI);let o=n.makeMesh("lambert",l,10987431);return o.castShadow=!1,u.add(o),u};let r=e();r.position.set(8,3,-6),this.wheels.push(r),this.mesh.add(r);let a=e();a.position.set(8,3,6),this.wheels.push(a),this.mesh.add(a);let i=e();i.position.set(-8,3,6),this.wheels.push(i),this.mesh.add(i);let d=e();d.position.set(-8,3,-6),this.wheels.push(d),this.mesh.add(d)}setPosition(e,r,a){this.mesh.position.set(e,r,a)}forward(e){e=e||1,this.moving(e,!0)}backward(e){e=e||1,this.moving(e,!1)}turnLeft(e,r){this.turn(e,!0,r)}turnRight(e,r){this.turn(e,!1,r)}turn(e,r,a){const i=r?1:-1;if(a){if(this.startAngle<e&&(this.mesh.rotation.y+=a,this.startAngle+=a,e-this.startAngle<a)){let d=this.mesh.rotation.y-this.startAngle;this.mesh.rotation.y=d+e,this.startAngle=0;return}}else this.mesh.rotation.y+=e*i}moving(e,r){let a=this.mesh.rotation.y;const i=r?1:-1;let d=e*Math.cos(a)*i,u=e*Math.sin(a)*i;this.mesh.position.x+=d,this.mesh.position.z-=u,this.rotateWheels(e)}rotateWheels(e){this.wheels.forEach(function(r){r.rotation.z-=.1*e})}}var g,A,B,T,z,fe=[],Z={isMobile:!1,background:2631720};T=window.innerWidth;z=window.innerHeight;g=new Xe;A=new Ye(45,T/z,1,5e3);A.position.set(330,330,330);A.lookAt(g.position);B=new De({antialias:!0});B.setSize(T,z);B.setClearColor(Z.background);B.shadowMap.enabled=!0;B.shadowMap.type=qe;document.body.appendChild(B.domElement);_e();at();ot();rt();tt();et();$e();me();it();function _e(){var t=navigator.userAgent;(t.match(/Android/i)||t.match(/webOS/i)||t.match(/iPhone/i)||t.match(/iPad/i)||t.match(/iPod/i)||t.match(/BlackBerry/i))&&(Z.isMobile=!0,A.position.set(420,420,420),B.shadowMap.enabled=!1)}function $e(){var t=[[-130,145,0],[10,145,0],[145,20,.5],[30,-145,1],[-145,-60,1.5]];t.forEach(function(e){var r=new he,a=e[0],i=e[1],d=e[2];r.setPosition(a,0,i),r.mesh.rotation.y=d*Math.PI,fe.push(r),g.add(r.mesh)})}function et(){var t=[[-84,82,1.5],[-58,82,1.5],[-32,82,1.5],[84,82,1.5]];t.forEach(function(e){var r=new he,a=e[0],i=e[1],d=e[2];r.setPosition(a,0,i),r.mesh.rotation.y=d*Math.PI,g.add(r.mesh)})}function tt(){var t=new G,e=16777215,r=[[-160,160],[160,160],[160,-160],[-160,-160]],a=[[-159,159],[-159,-159],[159,-159],[159,159]],i=n.makeShape(r,a),d=n.makeExtrudeGeometry(i,.1),u=n.makeMesh("phong",d,e);t.add(u);var p=[[-131,131],[-131,-131],[131,-131],[131,131],[19,131],[19,99],[99,99],[99,-99],[-99,-99],[-99,99],[-19,99],[-19,131]],f=n.makeShape(p),M=n.makeExtrudeGeometry(f,.1),l=n.makeMesh("phong",M,e);l.rotation.y=Math.PI,t.add(l);const o=[];let h=new b(20,.1,2);const s=[];for(let R=0;R<9;R++){let S=h.clone();S.translate(R*30,0,-1),s.push(S)}const m=O(s);m.translate(-120,0,145),o.push(m);var c=m.clone();c.translate(0,0,-290),o.push(c);var w=m.clone();w.rotateY(.5*Math.PI),o.push(w);var y=m.clone();y.rotateY(-.5*Math.PI),o.push(y);const x=O(o),P=n.makeMesh("phong",x,e);t.add(P),g.add(t)}function rt(){var t=new b(320,6,320),e=n.makeMesh("lambert",t,7298922);e.position.y=-3,g.add(e),d(),i(),u(),a(),r();function r(){var o=[[-12.5,12.5,1.25],[-7.5,12.5,-.5],[-2.5,12.5,-.5],[2.5,12.5,-.5],[7.5,12.5,-.5],[12.5,12.5,-.25],[12.5,7.5,0],[12.5,2.5,0],[12.5,-2.5,0],[12.5,-7.5,0],[12.5,-12.5,.25],[7.5,-12.5,.5],[2.5,-12.5,.5],[-2.5,-12.5,.5],[-7.5,-12.5,.5],[-12.5,-12.5,.75],[-12.5,-7.5,1],[-12.5,-2.5,1],[-12.5,2.5,1],[-12.5,7.5,1]];o.forEach(function(h){var s=h[0]*10,m=h[1]*10,c=h[2],w=p();w.rotation.y=c*Math.PI,w.position.set(s,0,m),g.add(w)})}function a(){var o=f();o.position.z=-20,g.add(o)}function i(){var o=[[-120,-120],[-120,120],[120,120],[120,-120],[20,-120],[20,-100],[100,-100],[100,100],[-100,100],[-100,-100],[-20,-100],[-20,-120],[-120,-120]],h=n.makeShape(o),s=n.makeExtrudeGeometry(h,3),m=n.makeMesh("lambert",s,12632170);g.add(m)}function d(){var o=[[-130,-130],[-130,130],[130,130],[130,-130],[20,-130],[20,-120],[120,-120],[120,120],[-120,120],[-120,-120],[-20,-120],[-20,-130],[-130,-130]],h=n.makeShape(o),s=n.makeExtrudeGeometry(h,3),m=n.makeMesh("lambert",s,15059647);g.add(m)}function u(){var o=[[-110,-110],[-90,-110],[-70,-110],[-50,-110],[-30,-110],[-10,-110],[10,-110],[30,-110],[50,-110],[70,-110],[90,-110],[-110,110],[-110,90],[-110,70],[-110,50],[-110,30],[-110,10],[-110,-10],[-110,-30],[-110,-50],[-110,-70],[-110,-90],[110,110],[90,110],[70,110],[50,110],[30,110],[-30,110],[-50,110],[-70,110],[-90,110],[110,-110],[110,-90],[110,-70],[110,-50],[110,-30],[110,-10],[110,10],[110,30],[110,50],[110,70],[110,90]];o.forEach(function(h){var s=h[0],m=1,c=h[1],w=l(s,m,c);g.add(w)})}function p(){let o=new G,h=new b(2,30,2);h.translate(0,15,0);let s=n.makeMesh("phong",h,15454658);o.add(s);let m=new b(10,1,1),c=n.makeMesh("phong",m,2887182);c.position.set(3,30,0),o.add(c);let w=new b(6,2,4),y;return y=n.makeMesh("phong",w,15454658),y.position.set(10,30,0),o.add(y),o}function f(){let o=new G,h=new b(180,3,140),s=n.makeMesh("lambert",h,16777215);s.position.y=1,o.add(s);let m=[[-80,-30],[-80,20],[50,20],[50,0],[20,-30],[-80,-30]],c=n.makeShape(m),w=n.makeExtrudeGeometry(c,100),y=new Y({map:le.window()});y.map.repeat.set(.1,.08);let x=new D(w,y);x.castShadow=!0,x.receiveShadow=!0,o.add(x);let P=c,R=n.makeExtrudeGeometry(P,5),S=n.makeMesh("lambert",R,11642799);S.position.y=100,o.add(S);const C=[];let U=new b(2,2,40);for(let v=0;v<12;v++){let k=U.clone();k.translate(v*5,0,0),C.push(k)}for(let v=0;v<2;v++){let k=U.clone();k.rotateY(.5*Math.PI),k.scale(1.6,1,1),k.translate(27,0,-15+v*30),C.push(k)}let J=[[0,0],[1,0],[0,1],[1,1]];for(let v=0;v<J.length;v++){let k=J[v],E=U.clone();E.scale(1,1,.4),E.rotateX(.5*Math.PI),E.translate(k[0]*55,0,-15+k[1]*30),C.push(E)}const ue=O(C);let K=n.makeMesh("phong",ue,16777215);K.position.set(-70,115,5),o.add(K);let ce=new b(150,3,90),N=n.makeMesh("lambert",ce,496293);N.position.set(-3,18,25),o.add(N);let pe=new b(150,15,3),V=n.makeMesh("phong",pe,496293);V.receiveShadow=!1,V.position.set(-3,24,68.5),o.add(V);let we=new b(150,3,3),Q=n.makeMesh("phong",we,16777215);Q.position.set(-3,33,68.5),o.add(Q);let ye=new q(2,2,15,32),F=n.makeMesh("lambert",ye,16777215);F.position.set(-60,10,55),o.add(F);let _=F.clone();_.position.set(55,10,55),o.add(_);let W=new G,ge=new b(4,106,4),j=n.makeMesh("phong",ge,16777215),$=j.clone();$.position.set(-80,52,30),W.add($);let ee=j.clone();ee.position.set(-80,52,-20),W.add(ee);let te=j.clone();te.position.set(50,52,-18),W.add(te),o.add(W);let be=[[-82,-32],[20,-32],[52,0],[52,22],[-82,22],[-82,-32]],Me=[[-78,-28],[20,-28],[48,0],[48,18],[-78,18],[-78,-28]],ve=n.makeShape(be,Me),ke=n.makeExtrudeGeometry(ve,8),re=n.makeMesh("phong",ke,16777215);re.position.y=100,o.add(re);let xe=[[-80,20],[-80,60],[80,60],[80,20],[-80,20]],Ge=[[-78,22],[78,22],[78,58],[-78,58],[-78,22]],Be=n.makeShape(xe,Ge),Pe=n.makeExtrudeGeometry(Be,90),Se=n.makeMesh("lambert",Pe,15917595);o.add(Se);let Ee=[[0,0],[36,0],[36,70],[0,70],[0,0]],Ae=[[2,2],[34,2],[34,68],[2,68],[2,2]],Re=n.makeShape(Ee,Ae),Le=n.makeExtrudeGeometry(Re,165),L=n.makeMesh("lambert",Le,16777215);L.rotation.x=-.5*Math.PI,L.rotation.z=-.5*Math.PI,L.position.y=86,L.position.z=-58,L.position.x=-78,o.add(L);let Ie=new ne(32,66,1,1),oe=new Y({map:le.window()});oe.map.repeat.set(2,6);let X=new D(Ie,oe);X.position.set(83,51,-40),X.rotation.y=.5*Math.PI,o.add(X);let H=M();H.scale.set(.6,.6,1),H.rotation.y=Math.PI,H.position.set(65,75,-61);for(let v=0;v<7;v++)for(let k=0;k<4;k++){let E=H.clone();E.position.x-=v*22,E.position.y-=k*20,o.add(E)}return o}function M(){var o=new G,h=new ne(20,20),s=n.makeMesh("phong",h,6970996);o.add(s);var m=new b(22,2,2),c=n.makeMesh("phong",m,16777215),w=c.clone();w.position.y=10,o.add(w);var y=c.clone();y.position.y=-10,o.add(y);var x=c.clone();x.rotation.z=.5*Math.PI,x.position.x=-10,o.add(x);var P=x.clone();return P.position.x=10,o.add(P),o}function l(m,c,w){var m=m||0,c=c||0,w=w||0,y=new G,x=new b(2,16,2),P=n.makeMesh("lambert",x,9068858);P.position.y=8,y.add(P);var R=new b(8,8,8),S=n.makeMesh("lambert",R,10264157);return S.position.y=13,y.add(S),y.position.set(m,c,w),y}}function ot(){if(Z.isMobile){var a=new Ke(16777215,1);g.add(a);var r=new ie(16777215,.15);g.add(r)}else{var t=new Ze(16777215,1.1);t.position.set(300,1e3,500),t.target.position.set(0,0,0),t.castShadow=!0;var e=300;t.shadow.camera=new Je(-e,e,e,-e,500,1600),t.shadow.bias=1e-4,t.shadow.mapSize.width=t.shadow.mapSize.height=1024,g.add(t);var r=new ie(16777215,.3);g.add(r)}}function at(){var t=new Ne(320,32);g.add(t);var e=new Qe(A,B.domElement);e.enableDamping=!0,e.dampingFactor=.25,e.rotateSpeed=.35}function nt(t){var e=t.mesh.rotation.y,r=t.mesh.position.x,a=t.mesh.position.z;r<145&&a===145?t.forward():e<.5*Math.PI?t.turnLeft(.5*Math.PI,.1):r===145&&a>-145?t.forward():e<Math.PI?t.turnLeft(.5*Math.PI,.1):r>-145&&a==-145?t.forward():e<1.5*Math.PI?t.turnLeft(.5*Math.PI,.1):r===-145&&a<145?(t.mesh.rotation.y=1.5*Math.PI,t.forward()):e<2*Math.PI?t.turnLeft(.5*Math.PI,.1):(t.setPosition(-145,0,145),t.mesh.rotation.set(0,0,0))}function me(){fe.forEach(function(t){nt(t)}),B.render(g,A),requestAnimationFrame(me)}function it(){window.addEventListener("resize",function(){T=window.innerWidth,z=window.innerHeight,A.aspect=T/z,A.updateProjectionMatrix(),B.setSize(T,z)})}
